<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>admin</title>
    <link rel="stylesheet" href="/css/admin.css" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.2/font/bootstrap-icons.css"
    />
    <style>
      .badge.text-success {
        background-color: #d1e7dd !important;
        color: #0f5132 !important;
      }
      .badge.text-danger {
        background-color: #f8d7da !important;
        color: #721c24 !important;
      }
      .badge.text-warning {
        background-color: #fff3cd !important;
        color: #856404 !important;
      }
      .badge.text-info {
        background-color: #d1ecf1 !important;
        color: #0c5460 !important;
      }
      .badge.text-secondary {
        background-color: #e2e3e5 !important;
        color: #383d41 !important;
      }
      
      .status-badge {
        padding: 0.375rem 0.75rem;
        border-radius: 0.375rem;
        font-size: 0.875rem;
        font-weight: 500;
      }
      
      .status-badge.active {
        background-color: #d1e7dd !important;
        color: #0f5132 !important;
      }
      
      .status-badge.suspended {
        background-color: #f8d7da !important;
        color: #721c24 !important;
      }
      
      .status-badge.on-leave {
        background-color: #fff3cd !important;
        color: #856404 !important;
      }
      
      .status-badge.terminated {
        background-color: #f8d7da !important;
        color: #721c24 !important;
      }
      
      .status-badge.resigned {
        background-color: #e2e3e5 !important;
        color: #383d41 !important;
      }
      
      .status-badge.retired {
        background-color: #d1ecf1 !important;
        color: #0c5460 !important;
      }
      
      .btn-group .btn {
        padding: 0.25rem 0.5rem;
        font-size: 0.875rem;
      }
      
      .btn-group .btn i {
        font-size: 0.875rem;
      }
      
      .table td {
        vertical-align: middle;
      }
    </style>
  </head>
  <body>
    <!-- Sidebar -->
    <div class="sidebar">
      <div class="text-center mb-4">
        <h4 class="text-white">Admin Panel</h4>
      </div>
      <ul class="nav flex-column">
        <li class="nav-item">
          <a class="nav-link" href="/admin">
            <i class="bi bi-speedometer2"></i> Dashboard
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/admin/admission">
            <i class="bi bi-person-plus"></i> Admissions
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/admin/student">
            <i class="bi bi-mortarboard"></i> Students
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link active" href="/admin/teacher">
            <i class="bi bi-person-workspace"></i> Teachers
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/admin/notice">
            <i class="bi bi-megaphone"></i> Notices
          </a>
        </li>
         <li class="nav-item">
                <a class="nav-link" href="/admin/payments" >
                    <i class="bi bi-credit-card"></i> Payments
                </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/login/logout">
            <i class="bi bi-box-arrow-right"></i> Logout
          </a>
        </li>
      </ul>
    </div>

    <div class="main-content">
      <div id="teachers" class="section">
        <div class="d-flex justify-content-between align-items-center mb-4">
          <h2>Teacher</h2>
          <div class="d-flex gap-2">
            <button class="btn btn-success" onclick="openBulkSalaryModal()">
              <i class="bi bi-cash-stack"></i> Generate Bulk Salary
            </button>
            <button class="btn btn-primary" onclick="addTeacher()">
              <i class="bi bi-plus-circle"></i> Add Teacher
            </button>
          </div>
        </div>
         <form action="/admin/teacher/credential" method="post">
        <div class="data-table">
          <div class="table-responsive">
            <table class="table table-striped table-hover">
              <thead class="table-dark">
                <tr>
                  <th style="width: 15%;">Teacher ID</th>
                  <th style="width: 25%;">Name</th>
                  <th style="width: 20%;">Subject</th>
                  <th style="width: 15%;">Status</th>
                  <th style="width: 25%;">Actions</th>
                </tr>
              </thead>
              <tbody id="teacherTableBody">
              <% teacher.forEach(function(found) { %>
               <tr>
                <td><%=found.teacherId %></td>
               <td><%=found.name %></td>
                <td><%=found.subject %></td>
                <td>
                  <span class="status-badge <%=found.status %>.toLowerCase()}"
                    ><%=found.status %></span
                  >
                </td>
                <td>
                  <div class="btn-group" role="group">
                    <button
                      class="btn btn-sm btn-primary"
                      onclick="viewTeacherDetails(`<%=found.teacherId %>`)"
                      title="View Details"
                    >
                      <i class="bi bi-eye"></i> View
                    </button>
                    <button type="submit" name="id" value="<%= found.teacherId %>, <%= found.email %>, <%= found.name %>"
                      class="btn btn-sm btn-success"
                      title="Generate Credentials"
                    >
                      <i class="bi bi-key"></i> Generate
                    </button>
                  </div>
                </td>
              </tr>                 
              <% }); %>
            </tbody>
          </table>
        </div>
      </form>
        </div>
      </div>
    </div>

      <!-- Add Teacher Modal -->
    <div class="modal fade" id="addTeacherModal" tabindex="-1">
      <div class="modal-dialog modal-lg">
        <form id="addTeacherForm" action="/admin/teacher/addTeacher" method="post">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title">Add Teacher</h5>
              <button
                type="button"
                class="btn-close"
                data-bs-dismiss="modal"
              ></button>
            </div>
            <div class="modal-body">
               <div class="row mb-3">
                <div class="col-md-6">
                  <label class="form-label">Teacher Name</label>
                  <input
                    type="text"
                    class="form-control"
                    name="name"
                    required
                  />
                </div>
                <div class="col-md-6">
                  <label class="form-label">Subject</label>
                  <input
                    type="text"
                    class="form-control"
                    name="subject"
                    required
                  />
                </div>
              </div>
              <div class="row mb-3">
                <div class="col-md-6">
                  <label class="form-label">Father's Name</label>
                  <input
                    type="text"
                    class="form-control"
                    name="father"
                    required
                  />
                </div>
                <div class="col-md-6">
                  <label class="form-label">Mother's Name</label>
                  <input
                    type="text"
                    class="form-control"
                    name="mother"
                    required
                  />
                </div>
              </div>

              <div class="row mb-3">
                <div class="col-md-6">
                  <label class="form-label">Date of Birth</label>
                  <input type="date" class="form-control" name="dob" required />
                </div>
                <div class="col-md-6">
                  <label class="form-label">Gender</label>
                  <select class="form-select" name="gender" required>
                    <option value="">Select Gender</option>
                    <option value="male">Male</option>
                    <option value="female">Female</option>
                    <option value="other">Other</option>
                  </select>
                </div>
              </div>

              <div class="row mb-3">
                <div class="col-md-3">
                  <label class="form-label">Class</label>
                  <select class="form-select" name="grade" required>
                    <option value="">Select Class</option>
                    <option value="NC">NC</option>
                    <option value="LKG">LKG</option>
                    <option value="UKG">UKG</option>
                    <% for (let i = 1; i <= 11; i++) { if (i !== 10) { %>
                    <option value="<%= i %>">Class <%= i %></option>
                    <% } } %>
                  </select>
                </div>

                <div class="col-md-3">
                  <label class="form-label">Section</label>
                  <input type="text" class="form-control" name="section" required />
                </div>

                <div class="col-md-6">
                  <label class="form-label">Previous Working Place</label>
                  <input
                    type="text"
                    class="form-control"
                    name="previousWorking"
                    required
                  />
                </div>
              </div>

              <div class="row mb-3">
                <div class="col-md-6">
                  <label class="form-label">Contact Number</label>
                  <input
                    type="tel"
                    class="form-control"
                    name="contact"
                    required
                  />
                </div>

                <div class="col-md-6">
                  <label class="form-label">Email ID</label>
                  <input
                    type="email"
                    class="form-control"
                    name="email"
                    required
                  />
                </div>

                <div class="col-md-6">
                  <label class="form-label">Salary</label>
                  <input
                    type="number"
                    class="form-control"
                    name="salary"
                    required
                  />
                </div>

                <div class="col-md-6">
                  <label class="form-label">Experience In Year</label>
                  <input
                    type="number"
                    class="form-control"
                    name="experience"
                    required
                  />
                </div>
              </div>

              <div class="row mb-3">
                <div class="col-md-12">
                  <label class="form-label">Address</label>
                  <textarea
                    class="form-control"
                    name="address"
                    rows="3"
                    required
                  ></textarea>
                </div>
              </div>
            </div>
            <div class="modal-footer">
              <button
                type="button"
                class="btn btn-secondary"
                data-bs-dismiss="modal"
              >
                Cancel
              </button>
              <button type="submit" class="btn btn-primary">Submit</button>
            </div>
          </div>
        </form>
      </div>
    </div>


    <div class="modal fade" id="teacherDetailsModal" tabindex="-1">
      <div class="modal-dialog modal-lg">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">Teacher Details</h5>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
            ></button>
          </div>
          <div class="modal-body">
         

            <ul class="nav nav-tabs" id="teacherTabs">
              <li class="nav-item">
                <a
                  class="nav-link active"
                  data-bs-toggle="tab"
                  href="#teacherInfo"
                  >Information</a
                >
              </li>
              <li class="nav-item">
                <a class="nav-link" data-bs-toggle="tab" href="#salaryHistory"
                  >Salary History</a
                >
              </li>
              <li class="nav-item">
                <a
                  class="nav-link"
                  data-bs-toggle="tab"
                  href="#teacherAttendance"
                  >Attendance</a
                >
              </li>
            </ul>
            <div class="tab-content mt-3">
              <div class="tab-pane fade show active" id="teacherInfo">
                <!-- Additional teacher information -->
                    <div class="teacher-info mb-4">
              <div class="row">
                <div class="col-md-6">
                  <div class="info-item">
                    <label class="text-muted">Teacher ID</label>
                    <p class="mb-3" id="teacherId"></p>
                  </div>
                  <div class="info-item">
                    <label class="text-muted">Full Name</label>
                    <p class="mb-3" id="teacherName"></p>
                  </div>
                  <div class="info-item">
                    <label class="text-muted">Father's Name</label>
                    <p class="mb-3" id="teacherFather"></p>
                  </div>
                  <div class="info-item">
                    <label class="text-muted">Mother's Name</label>
                    <p class="mb-3" id="teacherMother"></p>
                  </div>
                  <div class="info-item">
                    <label class="text-muted">Subject</label>
                    <p class="mb-3" id="teacherSubject"></p>
                  </div>
                  <div class="info-item">
                    <label class="text-muted">Class</label>
                    <p class="mb-3" id="teacherClass"></p>
                  </div>
                  <div class="info-item">
                    <label class="text-muted">Experience</label>
                    <p class="mb-3" id="teacherExperience"></p>
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="info-item">
                    <label class="text-muted">Date of Joining</label>
                    <p class="mb-3" id="teacherJoiningDate"></p>
                  </div>
                  <div class="info-item">
                    <label class="text-muted">Date of Birth</label>
                     <p class="mb-3" id="teacherDob"></p>
                  </div>
                  <div class="info-item">
                    <label class="text-muted">Gender</label>
                    <p class="mb-3" id="teacherGender"></p>
                  </div>
                  <div class="info-item">
                    <label class="text-muted">Mobile Number</label>
                    <p class="mb-3" id="teacherMobile"></p>
                  </div>
                   <div class="info-item">
                    <label class="text-muted">Email</label>
                    <p class="mb-3" id="teacherEmail"></p>
                  </div>
                  <div class="info-item">
                    <label class="text-muted">Section</label>
                    <p class="mb-3" id="teacherSection"></p>
                  </div>
                  <div class="info-item">
                    <label class="text-muted">Current Status</label>
                    <div class="d-flex align-items-center gap-2">
                      <span class="status-badge" id="teacherStatus"></span>
                      <button class="btn btn-sm btn-outline-primary" onclick="openUpdateStatusModal()">
                        <i class="bi bi-pencil"></i> Update Status
                      </button>
                    </div>
                  </div>
                </div>
              </div>
              <div class="row mt-3">
                <div class="col-6">
                  <div class="info-item">
                    <label class="text-muted">Address</label>
                    <p class="mb-3" id="teacherAddress"></p>
                  </div>
                </div>
                <div class="col-6">
                  <div class="info-item">
                    <label class="text-muted">Previous Working Place</label>
                    <p class="mb-3" id="teacherPrevious"></p>
                  </div>
                </div>
              </div>
            </div>
              </div>
              <div class="tab-pane fade" id="salaryHistory">
                <!-- Salary history will be loaded here -->
                <div class="d-flex justify-content-between align-items-center mb-4">
                  <div class="d-flex align-items-center gap-3">
                    <h5 class="mb-0">Current Salary:</h5>
                    <h5 class="mb-0 text-success" id="currentSalary">₹0</h5>
                  </div>
                  <div class="d-flex gap-2">
                    <button class="btn btn-success" onclick="generateSalary()">
                      <i class="bi bi-plus-circle"></i> Generate Salary
                    </button>
                    <button class="btn btn-primary" onclick="openSalaryModal()">
                      <i class="bi bi-plus-circle"></i> Add Salary
                    </button>
                    <button class="btn btn-warning" onclick="openIncreaseSalaryModal()">
                      <i class="bi bi-arrow-up-circle"></i> Increase Salary
                    </button>
                  </div>
                </div>
                
                <div id="salaryTableContainer">
                  <div class="text-center text-muted">
                    <p>No salary records found</p>
                  </div>
                </div>
              </div>
              <div class="tab-pane fade" id="teacherAttendance">
                <div class="d-flex justify-content-between align-items-center mb-4">
                  <div class="d-flex align-items-center gap-3">
                    <h5 class="mb-0">Attendance Record:</h5>
                    <select name="month" id="monthSelect" class="form-select" style="width: auto;" required>
                      <option value="">Select Month</option>
                      <option value="01">January</option>
                      <option value="02">February</option>
                      <option value="03">March</option>
                      <option value="04">April</option>
                      <option value="05">May</option>
                      <option value="06">June</option>
                      <option value="07">July</option>
                      <option value="08">August</option>
                      <option value="09">September</option>
                      <option value="10">October</option>
                      <option value="11">November</option>
                      <option value="12">December</option>
                    </select>
                  </div>
                  <button class="btn btn-primary" onclick="openLeaveModal()">
                    <i class="bi bi-plus-circle"></i> Apply Leave
                  </button>
                </div>
                <div id="attendanceSummary" class="mt-3 mb-3" style="display: none;">
                  <div class="row">
                    <div class="col-md-3">
                      <div class="card text-center">
                        <div class="card-body">
                          <h5 class="card-title text-success" id="presentCount">0</h5>
                          <p class="card-text">Present</p>
                        </div>
                      </div>
                    </div>
                    <div class="col-md-3">
                      <div class="card text-center">
                        <div class="card-body">
                          <h5 class="card-title text-danger" id="absentCount">0</h5>
                          <p class="card-text">Absent</p>
                        </div>
                      </div>
                    </div>
                    <div class="col-md-3">
                      <div class="card text-center">
                        <div class="card-body">
                          <h5 class="card-title text-warning" id="halfDayCount">0</h5>
                          <p class="card-text">Half Day</p>
                        </div>
                      </div>
                    </div>
                    <div class="col-md-3">
                      <div class="card text-center">
                        <div class="card-body">
                          <h5 class="card-title text-info" id="leaveCount">0</h5>
                          <p class="card-text">Leave</p>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div id="attendanceTableContainer" class="mt-3">
                  <div class="text-center text-muted">
                    <p>Select a month to view attendance records</p>
                  </div>
                </div>
              </div>
              <!-- Leave Application Modal -->
              <div class="modal fade" id="leaveModal" tabindex="-1">
                <div class="modal-dialog">
                  <form id="leaveForm">
                    <div class="modal-content">
                      <div class="modal-header">
                        <h5 class="modal-title">Apply for Leave</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                      </div>
                      <div class="modal-body">
                        <div class="mb-3">
                          <label class="form-label">From Date</label>
                          <input type="date" class="form-control" name="fromDate" required />
                        </div>
                        <div class="mb-3">
                          <label class="form-label">To Date</label>
                          <input type="date" class="form-control" name="toDate" required />
                        </div>
                        <div class="mb-3">
                          <label class="form-label">Reason</label>
                          <textarea class="form-control" name="reason" rows="2" required></textarea>
                        </div>
                      </div>
                      <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                        <button type="submit" class="btn btn-primary">Apply</button>
                      </div>
                    </div>
                  </form>
                </div>
              </div>

              <!-- Generate Salary Modal -->
              <div class="modal fade" id="generateSalaryModal" tabindex="-1">
                <div class="modal-dialog">
                  <form id="generateSalaryForm">
                    <div class="modal-content">
                      <div class="modal-header">
                        <h5 class="modal-title">Generate Salary</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                      </div>
                      <div class="modal-body">
                        <div class="mb-3">
                          <label class="form-label">Month</label>
                          <select class="form-select" name="month" required>
                            <option value="">Select Month</option>
                            <option value="01">January</option>
                            <option value="02">February</option>
                            <option value="03">March</option>
                            <option value="04">April</option>
                            <option value="05">May</option>
                            <option value="06">June</option>
                            <option value="07">July</option>
                            <option value="08">August</option>
                            <option value="09">September</option>
                            <option value="10">October</option>
                            <option value="11">November</option>
                            <option value="12">December</option>
                          </select>
                        </div>
                        <div class="mb-3">
                          <label class="form-label">Year</label>
                          <input type="number" class="form-control" name="year" value="2025" min="2020" max="2030" required />
                        </div>
                      </div>
                      <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                        <button type="submit" class="btn btn-success">Generate</button>
                      </div>
                    </div>
                  </form>
                </div>
              </div>

              <!-- Add Salary Modal -->
              <div class="modal fade" id="addSalaryModal" tabindex="-1">
                <div class="modal-dialog modal-lg">
                  <form id="addSalaryForm">
                    <div class="modal-content">
                      <div class="modal-header">
                        <h5 class="modal-title">Add Salary Record</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                      </div>
                      <div class="modal-body">
                        <div class="row mb-3">
                          <div class="col-md-6">
                            <label class="form-label">Month</label>
                            <select class="form-select" name="month" required>
                              <option value="">Select Month</option>
                              <option value="01">January</option>
                              <option value="02">February</option>
                              <option value="03">March</option>
                              <option value="04">April</option>
                              <option value="05">May</option>
                              <option value="06">June</option>
                              <option value="07">July</option>
                              <option value="08">August</option>
                              <option value="09">September</option>
                              <option value="10">October</option>
                              <option value="11">November</option>
                              <option value="12">December</option>
                            </select>
                          </div>
                          <div class="col-md-6">
                            <label class="form-label">Year</label>
                            <input type="number" class="form-control" name="year" value="2025" min="2020" max="2030" required />
                          </div>
                        </div>
                        <div class="row mb-3">
                          <div class="col-md-6">
                            <label class="form-label">Basic Salary</label>
                            <input type="number" class="form-control" name="basicSalary" id="basicSalaryInput" required />
                          </div>
                          <div class="col-md-6">
                            <label class="form-label">Allowances</label>
                            <input type="number" class="form-control" name="allowances" id="allowancesInput" value="0" />
                          </div>
                        </div>
                        <div class="row mb-3">
                          <div class="col-md-6">
                            <label class="form-label">Deductions</label>
                            <input type="number" class="form-control" name="deductions" id="deductionsInput" value="0" />
                          </div>
                          <div class="col-md-6">
                            <label class="form-label">Payment Method</label>
                            <select class="form-select" name="paymentMethod" required>
                              <option value="Bank Transfer">Bank Transfer</option>
                              <option value="Cash">Cash</option>
                              <option value="Check">Check</option>
                            </select>
                          </div>
                        </div>
                        <div class="row mb-3">
                          <div class="col-md-6">
                            <label class="form-label">Payment Status</label>
                            <select class="form-select" name="paymentStatus" required>
                              <option value="Pending">Pending</option>
                              <option value="Paid">Paid</option>
                              <option value="Cancelled">Cancelled</option>
                            </select>
                          </div>
                          <div class="col-md-6">
                            <label class="form-label">Payment Date</label>
                            <input type="date" class="form-control" name="paymentDate" />
                          </div>
                        </div>
                        <div class="row mb-3">
                          <div class="col-md-12">
                            <div class="alert alert-info">
                              <strong>Net Salary: <span id="netSalaryDisplay">₹0</span></strong>
                              <br><small class="text-muted">Basic Salary + Allowances - Deductions</small>
                            </div>
                          </div>
                        </div>
                        <div class="mb-3">
                          <label class="form-label">Remarks</label>
                          <textarea class="form-control" name="remarks" rows="2"></textarea>
                        </div>
                      </div>
                      <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                        <button type="submit" class="btn btn-primary">Add Salary</button>
                      </div>
                    </div>
                  </form>
                </div>
              </div>

              <!-- Pay Salary Modal -->
              <div class="modal fade" id="paySalaryModal" tabindex="-1">
                <div class="modal-dialog">
                  <form id="paySalaryForm">
                    <div class="modal-content">
                      <div class="modal-header">
                        <h5 class="modal-title">Update Payment Status</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                      </div>
                      <div class="modal-body">
                        <div class="mb-3">
                          <label class="form-label">Payment Status</label>
                          <select class="form-select" name="paymentStatus" required>
                            <option value="Pending">Pending</option>
                            <option value="Paid">Paid</option>
                            <option value="Cancelled">Cancelled</option>
                          </select>
                        </div>
                        <div class="mb-3">
                          <label class="form-label">Payment Method</label>
                          <select class="form-select" name="paymentMethod" required>
                            <option value="Bank Transfer">Bank Transfer</option>
                            <option value="Cash">Cash</option>
                            <option value="Check">Check</option>
                          </select>
                        </div>
                        <div class="mb-3">
                          <label class="form-label">Payment Date</label>
                          <input type="date" class="form-control" name="paymentDate" />
                        </div>
                        <div class="mb-3">
                          <label class="form-label">Remarks</label>
                          <textarea class="form-control" name="remarks" rows="2"></textarea>
                        </div>
                      </div>
                      <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                        <button type="submit" class="btn btn-success">Update Payment</button>
                      </div>
                    </div>
                  </form>
                </div>
              </div>

              <!-- Increase Salary Modal -->
              <div class="modal fade" id="increaseSalaryModal" tabindex="-1">
                <div class="modal-dialog">
                  <form id="increaseSalaryForm">
                    <div class="modal-content">
                      <div class="modal-header">
                        <h5 class="modal-title">Increase Teacher Salary</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                      </div>
                      <div class="modal-body">
                        <div class="mb-3">
                          <label class="form-label">Current Salary</label>
                          <input type="text" class="form-control" id="currentSalaryDisplay" readonly />
                        </div>
                        <div class="mb-3">
                          <label class="form-label">Increase Type</label>
                          <select class="form-select" name="increaseType" id="increaseType" required>
                            <option value="">Select Type</option>
                            <option value="percentage">Percentage (%)</option>
                            <option value="fixed">Fixed Amount (₹)</option>
                          </select>
                        </div>
                        <div class="mb-3">
                          <label class="form-label">Increase Value</label>
                          <input type="number" class="form-control" name="increaseValue" id="increaseValue" min="0" step="0.01" required />
                        </div>
                        <div class="mb-3">
                          <label class="form-label">New Salary</label>
                          <input type="text" class="form-control" id="newSalaryDisplay" readonly />
                        </div>
                        <div class="mb-3">
                          <label class="form-label">Effective From</label>
                          <input type="date" class="form-control" name="effectiveDate" required />
                        </div>
                        <div class="mb-3">
                          <label class="form-label">Reason for Increase</label>
                          <textarea class="form-control" name="reason" rows="3" required placeholder="e.g., Performance review, Promotion, Annual increment"></textarea>
                        </div>
                      </div>
                      <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                        <button type="submit" class="btn btn-warning">Update Salary</button>
                      </div>
                    </div>
                  </form>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Update Status Modal -->
      <div class="modal fade" id="updateStatusModal" tabindex="-1">
        <div class="modal-dialog">
          <form id="updateStatusForm">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title">Update Teacher Status</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
              </div>
              <div class="modal-body">
                <div class="mb-3">
                  <label class="form-label">Current Status</label>
                  <p class="form-control-plaintext" id="currentStatus"></p>
                </div>
                <div class="mb-3">
                  <label class="form-label">New Status</label>
                  <select class="form-select" name="newStatus" id="newStatusSelect" required>
                    <option value="">Select Status</option>
                    <option value="Active">Active</option>
                    <option value="Suspended">Suspended</option>
                    <option value="On Leave">On Leave</option>
                    <option value="Terminated">Terminated</option>
                    <option value="Resigned">Resigned</option>
                    <option value="Retired">Retired</option>
                  </select>
                </div>
                <div class="mb-3">
                  <label class="form-label">Remarks</label>
                  <textarea class="form-control" name="remarks" id="statusRemarks" rows="3" placeholder="Enter reason for status change (optional)"></textarea>
                </div>
              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                <button type="submit" class="btn btn-primary">Update Status</button>
              </div>
            </div>
          </form>
        </div>
      </div>

      </div>
    </div>

    <!-- Bulk Salary Generation Modal -->
    <div class="modal fade" id="bulkSalaryModal" tabindex="-1">
      <div class="modal-dialog modal-lg">
        <form id="bulkSalaryForm">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title">Generate Bulk Salary</h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
              <div class="row mb-3">
                <div class="col-md-6">
                  <label class="form-label">Month</label>
                  <select class="form-select" name="month" id="bulkMonthSelect" required>
                    <option value="">Select Month</option>
                    <option value="01">January</option>
                    <option value="02">February</option>
                    <option value="03">March</option>
                    <option value="04">April</option>
                    <option value="05">May</option>
                    <option value="06">June</option>
                    <option value="07">July</option>
                    <option value="08">August</option>
                    <option value="09">September</option>
                    <option value="10">October</option>
                    <option value="11">November</option>
                    <option value="12">December</option>
                  </select>
                </div>
                <div class="col-md-6">
                  <label class="form-label">Year</label>
                  <input type="number" class="form-control" name="year" id="bulkYearInput" value="2025" min="2020" max="2030" required />
                </div>
              </div>
              <div class="row mb-3">
                <div class="col-md-12">
                  <label class="form-label">Teacher Status Filter</label>
                  <div class="form-check">
                    <input class="form-check-input" type="checkbox" name="statusFilter" value="Active" id="statusActive" checked>
                    <label class="form-check-label" for="statusActive">Active</label>
                  </div>
                  <div class="form-check">
                    <input class="form-check-input" type="checkbox" name="statusFilter" value="On Leave" id="statusOnLeave" checked>
                    <label class="form-check-label" for="statusOnLeave">On Leave</label>
                  </div>
                  <div class="form-check">
                    <input class="form-check-input" type="checkbox" name="statusFilter" value="Suspended" id="statusSuspended">
                    <label class="form-check-label" for="statusSuspended">Suspended</label>
                  </div>
                  <div class="form-check">
                    <input class="form-check-input" type="checkbox" name="statusFilter" value="Resigned" id="statusResigned">
                    <label class="form-check-label" for="statusResigned">Resigned</label>
                  </div>
                  <div class="form-check">
                    <input class="form-check-input" type="checkbox" name="statusFilter" value="Retired" id="statusRetired">
                    <label class="form-check-label" for="statusRetired">Retired</label>
                  </div>
                </div>
              </div>
              <div class="row mb-3">
                <div class="col-md-12">
                  <div class="alert alert-info">
                    <strong>Note:</strong> This will generate salary for all teachers with selected statuses who don't already have salary records for the specified month.
                  </div>
                </div>
              </div>
              <div class="row mb-3">
                <div class="col-md-12">
                  <div id="bulkSalaryPreview" style="display: none;">
                    <h6>Teachers to be processed:</h6>
                    <div id="teacherList" class="border p-3 bg-light rounded"></div>
                  </div>
                </div>
              </div>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
              <button type="button" class="btn btn-info" onclick="previewBulkSalary()">Preview</button>
              <button type="submit" class="btn btn-success">Generate Salaries</button>
            </div>
          </div>
        </form>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <script type="application/json" id="teachers-data">
      <%- JSON.stringify(teacher) %>
    </script>
    
    <script src="/js/admin/teacher.js"></script>
  </body>
</html>
